(function(e){function t(t){for(var a,r,o=t[0],s=t[1],u=t[2],l=0,f=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&f.push(c[r][0]),c[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==c[s]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},c={live:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=s;i.push([1,"chunk-common","chunk-live-vendors"]),n()})({1:function(e,t,n){e.exports=n("bf33")},"53d4":function(e,t,n){"use strict";n("e96a")},"6a57":function(e,t,n){"use strict";n("af60")},"85e4":function(e,t,n){"use strict";n("e4b8")},af60:function(e,t,n){},bf33:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("5595");var a=n("7a23");function c(e,t,n,c,i,r){var o=Object(a["u"])("danmaku-item"),s=Object(a["u"])("live");return c.errMsg?(Object(a["o"])(),Object(a["d"])(o,{key:0,type:"info",message:c.errMsg},null,8,["message"])):c.ready?(Object(a["o"])(),Object(a["d"])(s,Object(a["l"])(Object(a["i"])({key:1},c.props)),null,16)):Object(a["e"])("",!0)}n("99af");var i=n("f6cc"),r=n("bad4"),o=n("33e1"),s={id:"live"};function u(e,t,n,c,i,r){var o=Object(a["u"])("danmaku-list");return Object(a["o"])(),Object(a["f"])("div",s,[c.props.giftPin?(Object(a["o"])(),Object(a["d"])(o,Object(a["i"])({key:0,ref:"giftPinList"},c.props,{"gift-show-face":e.giftShowFace,"is-gift-list":!0}),null,16,["gift-show-face"])):Object(a["e"])("",!0),Object(a["h"])(o,Object(a["i"])({ref:"danmakuList"},c.props),null,16)])}n("b0c0"),n("18a5");var d={key:0,class:"danmaku-list-pinned",ref:"danmakuListRef"},l={class:"danmaku-list hidden"},f={class:"danmaku-list absolute",ref:"giftListRef"},b={key:1,class:"danmaku-list",ref:"danmakuListRef"},m={key:0,class:"danmaku-list-placeholder"};function O(e,t,n,c,i,r){var o=Object(a["u"])("danmaku-item");return n.isGiftList?(Object(a["o"])(),Object(a["f"])("div",d,[Object(a["g"])("div",l,[(Object(a["o"])(!0),Object(a["f"])(a["a"],null,Object(a["s"])(e.giftPin,(function(e){return Object(a["o"])(),Object(a["d"])(o,{key:e,"show-face":!0,type:"gift",uname:"某人",giftName:"礼物",num:e},null,8,["num"])})),128))]),Object(a["g"])("div",f,[(Object(a["o"])(!0),Object(a["f"])(a["a"],null,Object(a["s"])(c.danmakuList,(function(e){return Object(a["o"])(),Object(a["d"])(o,Object(a["i"])({key:e.key},e.props,{hidden:e.hidden,ref_for:!0,ref:function(t){return e.el=t}}),null,16,["hidden"])})),128))],512)],512)):(Object(a["o"])(),Object(a["f"])("div",b,["bottom"===e.display?(Object(a["o"])(),Object(a["f"])("div",m)):Object(a["e"])("",!0),(Object(a["o"])(!0),Object(a["f"])(a["a"],null,Object(a["s"])(c.danmakuList,(function(e){return Object(a["o"])(),Object(a["d"])(o,Object(a["i"])({key:e.key},e.props,{hidden:e.hidden,ref_for:!0,ref:function(t){return e.el=t}}),null,16,["hidden"])})),128))],512))}var j=n("1da1"),p=n("5530"),v=n("443d"),g=n.n(v),h=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("c740"),n("a434"),n("d81d"),n("4e82"),n("b64b"),n("159b"),n("ec26")),k=(n("3835"),n("53ca"),n("b85c"),["src"]),y={key:1,class:"danmaku-content"},w={class:"danmaku-message"},L={key:2,class:"danmaku-content"},S=Object(a["g"])("span",{class:"danmaku-message"},"感谢 ",-1),P={class:"danmaku-author-name"},R=Object(a["g"])("span",{class:"danmaku-message"}," 赠送 ",-1),M={class:"danmaku-gift-name"},x=Object(a["g"])("span",{class:"danmaku-message"}," × ",-1),D={class:"danmaku-gift-num"},I={key:3,class:"danmaku-content"},N=Object(a["g"])("span",{class:"danmaku-message"},"感谢 ",-1),T={class:"danmaku-author-name"},_={class:"danmaku-message"},B={key:4,class:"danmaku-content"},C={class:"danmaku-message"};function E(e,t,n,c,i,r){return Object(a["o"])(),Object(a["f"])("div",{class:Object(a["k"])(["danmaku-item",{hidden:c.isHidden}])},[n.showFace?(Object(a["o"])(),Object(a["f"])("img",{key:0,class:"danmaku-author-face",src:n.face},null,8,k)):Object(a["e"])("",!0),"message"===n.type?(Object(a["o"])(),Object(a["f"])("div",y,[Object(a["g"])("span",{class:Object(a["k"])(["danmaku-author-name with-colon",{anchor:n.isAnchor,owner:n.isOwner}])},Object(a["v"])(n.uname),3),Object(a["g"])("span",w,Object(a["v"])(n.message),1)])):"gift"===n.type?(Object(a["o"])(),Object(a["f"])("div",L,[S,Object(a["g"])("span",P,Object(a["v"])(n.uname),1),R,Object(a["g"])("span",M,Object(a["v"])(n.giftName),1),x,Object(a["g"])("span",D,Object(a["v"])(n.num),1)])):"sc"===n.type?(Object(a["o"])(),Object(a["f"])("div",I,[N,Object(a["g"])("span",T,Object(a["v"])(n.uname),1),Object(a["g"])("span",_," 的SC："+Object(a["v"])(n.message),1)])):"info"===n.type?(Object(a["o"])(),Object(a["f"])("div",B,[Object(a["g"])("span",C,Object(a["v"])(n.message),1)])):Object(a["e"])("",!0)],2)}n("a9e3");var F={props:{type:{type:String,default:"message"},showFace:Boolean,face:String,uid:Number,uname:String,message:String,isAnchor:Boolean,isOwner:Boolean,action:String,giftName:String,num:Number,stay:Number,hidden:Boolean},setup:function(e){var t=Object(a["r"])(!1),n=Object(a["r"])(!1);if(e.stay){var c=setTimeout((function(){t.value=!0,"info"===e.type&&setTimeout((function(){return n.value=!0}),800)}),e.stay);Object(a["m"])((function(){return clearTimeout(c)}))}var i=Object(a["b"])((function(){return e.hidden||t.value}));return Object(p["a"])(Object(p["a"])({},Object(a["w"])(e)),{},{isHidden:i,needRemoved:n})}},A=(n("dfee"),n("6b0d")),G=n.n(A);const H=G()(F,[["render",E]]);var U=H,z=(new Map,{components:{DanmakuItem:U},props:Object(p["a"])(Object(p["a"])({},i["d"]),{},{isGiftList:Boolean}),setup:function(e){var t=!0;Object(a["m"])((function(){return t=!1}));var n=Object(a["r"])([]),c=Object(a["r"])(null),i=Object(a["r"])(null);Object(a["n"])((function(){var e=c.value.getBoundingClientRect().top-5,t=function(){var t=n.value.findIndex((function(t){var n,a,c,i,r=null!==(n=null===(a=t.el)||void 0===a||null===(c=a.$el)||void 0===c?void 0:c.getBoundingClientRect())&&void 0!==n?n:{},o=r.top,s=void 0===o?e:o,u=r.height,d=void 0===u?0:u;return s<e&&(t.hidden=!0),s+d>e&&!(null!==(i=t.el)&&void 0!==i&&i.needRemoved)}));t>0&&n.value.splice(0,t)},i=setInterval(t,100);Object(a["m"])((function(){return clearInterval(i)}))}));var r=function(){var t=Object(a["x"])(e.isGiftList?i:c);t&&(t.scrollTop=t.scrollHeight)};e.isGiftList||(Object(a["n"])((function(){return window.addEventListener("resize",r)})),Object(a["m"])((function(){return window.removeEventListener("resize",r)})));var o=[],s=function e(){var c=200,i=o.length;i>0&&(c=Math.min(c,1e3/i),n.value.push(o.shift()),Object(a["j"])(r)),t&&setTimeout(e,c)};s();var u=function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.stay=n.stay||("bottom"===e.display?e.stay:0),o.push({props:n,key:Object(h["a"])(),el:null,hidden:!1});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=[];if(e.limit){var l=setInterval((function(){var t=d.splice(0);t.length&&(t.length>e.limit&&(t=g()(Object.keys(t),e.limit).sort().map((function(e){return t[e]}))),t.forEach((function(e){return u(e)})))}),1e3);Object(a["m"])((function(){return clearInterval(l)}))}var f=function(e){return d.push(e)};return Object(p["a"])(Object(p["a"])({},Object(a["w"])(e)),{},{danmakuList:n,danmakuListRef:c,giftListRef:i,addDanmaku:u,addSpeedLimitDanmaku:f})}});n("6a57");const J=G()(z,[["render",O]]);var $=J,q={components:{DanmakuList:$},props:i["d"],setup:function(e){var t=Object(a["r"])(null),n=Object(a["r"])(null),c=function(t){n.value.addDanmaku({type:"info",message:t,stay:e.stay||5e3})},i=function(t){e.limit?n.value.addSpeedLimitDanmaku(t):n.value.addDanmaku(t)};return Object(a["n"])((function(){e.connection.on("SendChatMessage",(function(t){var n=t.message,a=t.uid,c=t.name,r=t.isOwner,o=t.avatarUrl,s={type:"message",showFace:!0,face:o,uid:a,uname:c,message:n,isAnchor:a===e.anchor,isOwner:!!r};e.delay>0?setTimeout((function(){return i(s)}),1e3*e.delay):i(s)})),e.connection.onreconnecting((function(e){c("连接错误，正在重新连接")}));var a=e.giftPin?t:n;e.connection.on("SendSuperChatMessage",(function(e){var t=e.message,n=e.uid,c=e.name,i=(e.isOwner,e.avatarUrl);a.value.addDanmaku({type:"sc",showFace:!0,face:i,uid:n,uname:c,message:t})})),window.giftList=a,console.log("正在连接直播弹幕服务"),e.connection.start(),c("已连接直播间 ".concat(e.room))})),{props:e,giftPinList:t,danmakuList:n}}};n("85e4");const K=G()(q,[["render",u]]);var Q=K,V={components:{Live:Q,DanmakuItem:U},setup:function(){var e=function(){return window.location.reload()};window.addEventListener("hashchange",e),Object(a["m"])((function(){return window.removeEventListener("hashchange",e)}));var t=Object(a["p"])(Object(i["c"])(window.location.hash)),n=Object(a["r"])(!1),c=Object(a["r"])(""),s=window.location.host,u=(new r["a"]).withAutomaticReconnect().withUrl("http://".concat(s,"/chat?room=").concat(t.room,"&guildName=").concat(t.guildName)).configureLogging(o["a"].Information).build();return t.connection=u,t.face=!0,n.value=!0,{props:t,ready:n,errMsg:c}}};n("53d4");const W=G()(V,[["render",c]]);var X=W;Object(a["c"])(X).mount("#app")},d72a:function(e,t,n){},dfee:function(e,t,n){"use strict";n("d72a")},e4b8:function(e,t,n){},e96a:function(e,t,n){}});